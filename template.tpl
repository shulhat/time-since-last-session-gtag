___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Time Since Last Session for GA4",
  "categories": [
    "ANALYTICS",
    "UTILITY"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "This tag creates an additional data layer event with time between sessions measured in minutes, days, weeks, or months. Additionally, it maps same recency buckets from Universal Analytics and Adobe.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "measurementId",
    "simpleValueType": true,
    "displayName": "GA4 Measurement ID",
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "defaultFields",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "current_session_id",
        "checkboxText": "current_session_id",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "CHECKBOX",
        "name": "previous_session_id",
        "checkboxText": "previous_session_id",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "CHECKBOX",
        "name": "current_session_number",
        "checkboxText": "current_session_number",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "previous_session_number",
        "checkboxText": "previous_session_number",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "mins_since_last_session",
        "checkboxText": "mins_since_last_session",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "days_since_last_session",
        "checkboxText": "days_since_last_session",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "weeks_since_last_session",
        "checkboxText": "weeks_since_last_session",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "monthes_since_last_session",
        "checkboxText": "monthes_since_last_session",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "universal_recency_buckets",
        "checkboxText": "universal_recency_buckets",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "adobe_recency_buckets",
        "checkboxText": "adobe_recency_buckets",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      }
    ],
    "displayName": "The dataLayer event since_last_session_data fields"
  },
  {
    "type": "GROUP",
    "name": "additionalFields",
    "displayName": "Additional dataLayer options",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "emptyStringDl",
        "checkboxText": "No empty string in the main event",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "qaEventsPusher",
        "checkboxText": "Disable QA dataLayer events",
        "simpleValueType": true,
        "alwaysInSummary": true,
        "defaultValue": true
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Import required modules
const createArgumentsQueue = require('createArgumentsQueue');
const createQueue = require('createQueue');
const setCookie = require('setCookie');
const getCookieValues = require('getCookieValues');
const getTimestamp = require('getTimestamp');
const makeNumber = require('makeNumber');
const makeString = require('makeString');
const logToConsole = require('logToConsole');
const dlPush = createQueue('dataLayer');
const gtag = createArgumentsQueue('gtag', 'dataLayer');
const Math = require('Math');

// Initialize variables
const liveCurrentSessionDataGtagObject = {};
const liveCurrentSessionDataGtagFields = ['session_id', 'session_number'];
const cookieName = "custom_gtm_session_data";

let liveCurrentSessionID, currentSessionId, storedCurrentSessionID, storedPreviousSessionID;
let currentSessionNumber, previousSessionNumber;
let secondsSinceLastSession, minsSinceLastSession, daysSinceLastSession, weeksSinceLastSession, monthesSinceLastSession, uaBucketsSinceLastSession, adobeBucketsSinceLastSession;

// Function to store cookies with session data
const storeCookiesWithSessionData = (cookieName, currentSessionID, previousSessionID) => {
  const combinedSessionData = previousSessionID + "," + currentSessionID;
  setCookie(cookieName, combinedSessionData, {
    'max-age': getTimestamp() + 400 * 24 * 60 * 60
  });
};

// Function to calculate seconds since last session
const calculateSecondsSinceLastSession = (previousSessionID, currentSessionID) => {
  const secondsSinceLastSession = makeNumber(currentSessionID) - makeNumber(previousSessionID);
  
  if (!data.qaEventsPusher) {
    dlPush({
      'event': 'seconds_since_last_session_qa',
      'timeDiff': secondsSinceLastSession,
      'currentSessionID': currentSessionID,
      'previousSessionID': previousSessionID
    });
  }
  
  return secondsSinceLastSession;
};

// Function to calculate UA buckets since last session
const calculateUaBucketsSinceLastSession = (daysSinceLastSession) => {
  
  daysSinceLastSession = makeNumber(daysSinceLastSession);
  
  if (daysSinceLastSession == 0) {
    return "0";
  } else if (daysSinceLastSession == 1) {
    return "1";
  } else if (daysSinceLastSession == 2) {
    return "2";
  } else if (daysSinceLastSession == 3) {
    return "3";
  } else if (daysSinceLastSession == 4) {
    return "4";
  } else if (daysSinceLastSession == 5) {
    return "5";
  } else if (daysSinceLastSession == 6) {
    return "6";
  } else if (daysSinceLastSession == 7) {
    return "7";
  } else if (daysSinceLastSession >= 8 && daysSinceLastSession <= 14) {
    return "8-14";
  } else if (daysSinceLastSession >= 15 && daysSinceLastSession <= 30) {
    return "15-30";
  } else if (daysSinceLastSession >= 31 && daysSinceLastSession <= 60) {
    return "31-60";
  } else if (daysSinceLastSession >= 61 && daysSinceLastSession <= 120) {
    return "61-120";
  } else if (daysSinceLastSession >= 121 && daysSinceLastSession <= 364) {
    return "121-364";
  } else {
    return "365+";
  }
};

// Function to calculate Adobe buckets since last session
const calculateAdobeBucketsSinceLastSession = (daysSinceLastSession) => {
  
  daysSinceLastSession = makeNumber(daysSinceLastSession);
  
  if (daysSinceLastSession < 1) {
    return "Less than 1 day";
  } else if (daysSinceLastSession >= 1 && daysSinceLastSession <= 3) {
    return "1 to 3 days";
  } else if (daysSinceLastSession > 3 && daysSinceLastSession <= 7) {
    return "3 to 7 days";
  } else if (daysSinceLastSession > 7 && daysSinceLastSession <= 14) {
    return "7 to 14 days";
  } else if (daysSinceLastSession > 14 && daysSinceLastSession <= 30) {
    return "14 days to 1 month";
  } else {
    return "Longer than 1 month";
  }
};

// Function to get data from gtag
const gtagSessionScript = () => {
  gtag('get', data.measurementId, liveCurrentSessionDataGtagFields[0], val => {
    liveCurrentSessionDataGtagObject[liveCurrentSessionDataGtagFields[0]] = val;
    
    if (liveCurrentSessionDataGtagFields[0] == 'session_id') {
      liveCurrentSessionID = val;
      
      const getCookiesWithSessionData = getCookieValues(cookieName)[0] || "";
      let valuesCookiesWithSessionData = getCookiesWithSessionData ? getCookiesWithSessionData.split(',') : ["", ""];
      
      storedPreviousSessionID = valuesCookiesWithSessionData[0];
      storedCurrentSessionID = valuesCookiesWithSessionData[1];
      
      if (!data.qaEventsPusher) {
        dlPush({
          'event': 'get_cookies_with_session_data_qa',
          'storedPreviousSessionID': storedPreviousSessionID,
          'storedCurrentSessionID': storedCurrentSessionID,
          'liveCurrentSessionID': liveCurrentSessionID
        });
      }

      if (!storedCurrentSessionID && !storedPreviousSessionID) {
        
        storeCookiesWithSessionData(cookieName, liveCurrentSessionID, liveCurrentSessionID);
        storedCurrentSessionID = liveCurrentSessionID;
        storedPreviousSessionID = liveCurrentSessionID;
        
        if (!data.qaEventsPusher) {
          dlPush({
            'event': 'store_cookies_with_session_data_qa',
            'store_type': 'no_previous_session_id_stored',
            'storedPreviousSessionID': storedPreviousSessionID,
            'storedCurrentSessionID': storedCurrentSessionID,
            'liveCurrentSessionID': liveCurrentSessionID
          });
        }
        
        storedPreviousSessionID = '';
        
      } else if (storedCurrentSessionID != liveCurrentSessionID) {
        
        storedPreviousSessionID = storedCurrentSessionID;
        storedCurrentSessionID = liveCurrentSessionID;
        
        storeCookiesWithSessionData(cookieName, storedCurrentSessionID, storedPreviousSessionID);
        
        if (!data.qaEventsPusher) {
          dlPush({
            'event': 'store_cookies_with_session_data_qa',
            'store_type': 'change_previously_stored_session_ids',
            'storedPreviousSessionID': storedPreviousSessionID,
            'storedCurrentSessionID': storedCurrentSessionID,
            'currentSessionId': liveCurrentSessionID
          });
        }
      } else {
        
        if (!storedCurrentSessionID && !storedPreviousSessionID) {
        storedCurrentSessionID = liveCurrentSessionID;
        storedPreviousSessionID = liveCurrentSessionID;
        }
        
        storeCookiesWithSessionData(cookieName, storedCurrentSessionID, storedPreviousSessionID);
        
        if (!data.qaEventsPusher) {
          dlPush({
            'event': 'no_cookies_storing_qa',
            'store_type': 'the_same_session_is_running',
            'storedPreviousSessionID': storedPreviousSessionID,
            'storedCurrentSessionID': storedCurrentSessionID,
            'currentSessionId': liveCurrentSessionID
          });
        }
      }
    } else if (liveCurrentSessionDataGtagFields[0] == 'session_number') {
      currentSessionNumber = val;
      previousSessionNumber = currentSessionNumber - 1;
      
      if (storedPreviousSessionID == storedCurrentSessionID || !storedPreviousSessionID) {
        previousSessionNumber = '';
        storedPreviousSessionID = '';
      }
    }
    
    liveCurrentSessionDataGtagFields.shift();
    if (liveCurrentSessionDataGtagFields.length) {
      gtagSessionScript();
    } else {
      if (!data.qaEventsPusher) { 
        dlPush({
          event: 'live_current_session_id_gtag_qa',
          gtagApiQA: liveCurrentSessionDataGtagObject
        });
      }
      
   
      
      if (!data.emptyStringDl && storedPreviousSessionID == '') {
        secondsSinceLastSession = '';
        minsSinceLastSession = '';
        daysSinceLastSession = '';
        weeksSinceLastSession = '';
        monthesSinceLastSession = '';
        uaBucketsSinceLastSession = '';
        adobeBucketsSinceLastSession = '';
      } else if (data.emptyStringDl && storedPreviousSessionID == '') {
        storedPreviousSessionID = 'No previous session data';
        previousSessionNumber = 'No previous session data';
        secondsSinceLastSession = 'No previous session data';
        minsSinceLastSession = 'No previous session data';
        daysSinceLastSession = 'No previous session data';
        weeksSinceLastSession = 'No previous session data';
        monthesSinceLastSession = 'No previous session data';
        uaBucketsSinceLastSession = 'No previous session data';
        adobeBucketsSinceLastSession = 'No previous session data';  
      } else {
        secondsSinceLastSession = calculateSecondsSinceLastSession(storedPreviousSessionID, storedCurrentSessionID);
        minsSinceLastSession = makeString(Math.floor(secondsSinceLastSession / (60)));
        daysSinceLastSession = makeString(Math.floor(secondsSinceLastSession / (60 * 60 * 24)));
        weeksSinceLastSession = makeString(Math.floor(secondsSinceLastSession / (60 * 60 * 24 * 7)));
        monthesSinceLastSession = makeString(Math.floor(secondsSinceLastSession / (60 * 60 * 24 * 30)));
        uaBucketsSinceLastSession = calculateUaBucketsSinceLastSession(daysSinceLastSession);
        adobeBucketsSinceLastSession = calculateAdobeBucketsSinceLastSession(daysSinceLastSession);
      }
      
      const sinceLastSessionDataLayerObject = {
        'event': 'since_last_session_data'
      };

      // Conditionally add each field if it exists in the data object
      if (data.current_session_id) {
        sinceLastSessionDataLayerObject.current_session_id = storedCurrentSessionID;
      }
      if (data.previous_session_id) {
        sinceLastSessionDataLayerObject.previous_session_id = storedPreviousSessionID;
      }
      if (data.current_session_number) {
        sinceLastSessionDataLayerObject.current_session_number = makeString(currentSessionNumber);
      }
      if (data.previous_session_number) {
        sinceLastSessionDataLayerObject.previous_session_number = makeString(previousSessionNumber);
      }
      if (data.mins_since_last_session) {
        sinceLastSessionDataLayerObject.mins_since_last_session = minsSinceLastSession;
      }
      if (data.days_since_last_session) {
        sinceLastSessionDataLayerObject.days_since_last_session = daysSinceLastSession;
      }
      if (data.weeks_since_last_session) {
        sinceLastSessionDataLayerObject.weeks_since_last_session = weeksSinceLastSession;
      }
      if (data.monthes_since_last_session) {
        sinceLastSessionDataLayerObject.monthes_since_last_session = monthesSinceLastSession;
      }
      if (data.universal_recency_buckets) {
        sinceLastSessionDataLayerObject.universal_recency_buckets = uaBucketsSinceLastSession;
      }
      if (data.adobe_recency_buckets) {
        sinceLastSessionDataLayerObject.adobe_recency_buckets = adobeBucketsSinceLastSession;
      }

      dlPush(
        sinceLastSessionDataLayerObject
      );

      data.gtmOnSuccess();
    }
  });
};

 gtagSessionScript();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtag"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "custom_gtm_session_data"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "custom_gtm_session_data"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 8/1/2024, 12:01:05 AM


